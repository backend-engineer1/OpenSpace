local assetHelper = asset.require("util/asset_helper")
local transforms = asset.require("scene/solarsystem/sun/transforms")

local PARSEC_CONSTANT = 3.0856776E16;
local browserId = "SkyBrowser3D";

local browser = {
  Identifier = browserId,
  Parent = transforms.SolarSystemBarycenter.Identifier,
  Transform = {
    Translation = {
      Type = "StaticTranslation",
      Position = {
        -3.915 * PARSEC_CONSTANT,
        -150.153 * PARSEC_CONSTANT,
        -120.706 * PARSEC_CONSTANT
      },
    },
    Rotation = {
      Type = "StaticRotation",
      Rotation = {0.0, 0.0, 0.0}
    }
  },
  Renderable = {
    Identifier = "SkyBrowser3DRenderable",
    Type = "RenderableSkyBrowser",
    Size = 10.0E11,
    Origin = "Center",
    Billboard = false,
    Url = "http://localhost:8000",
    Opacity = 0.99
  },
  GUI = {
    Name = "Sky Browser 3D",
    Path = "/SkyBrowser",
  }
}

asset.onInitialize(function ()
   openspace.addSceneGraphNode(browser)
   openspace.skybrowser.addToSkyBrowserModule(browserId)
end)

asset.onDeinitialize(function ()
    openspace.removeScreenSpaceRenderable(browserId)
    openspace.removeScreenSpaceRenderable(targetId)
end)

asset.export("browser", {browser})
