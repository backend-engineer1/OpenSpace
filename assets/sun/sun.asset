local assetHelper = asset.import('assethelper')
local transforms = asset.import('./transforms')

local sunParentName = transforms.SunIau.Name;
local texturesPath = asset.syncedResource("textures");

asset.sync = {
    {
        Type = "ResourceSynchronization",
        Destination = texturesPath,
        Identifier = "sun_textures",
        Version = 1
    },
    {
        Type = "TorrentSynchronization",
        Destination = texturesPath,
        File = "torrentFilePath.torrent",
    }
}


-- Simple sphere to represent the Sun
asset.Sun = {
    Name = "Sun",
    Renderable = {
        Parent = sunParentName,
        Type = "RenderablePlanet",
        Frame = "IAU_SUN",
        Body = "SUN", 
        Geometry = {
            Type = "SimpleSphere",
            Radius = 6.957E8,
            Segments = 100
        },
        Textures = {
            Type = "simple",
            Color = texturesPath .. "/sun.jpg",
        },
        PerformShading = false,
    }
}

-- Billboard to represent the sun
asset.SunGlare = {
    Name = "SunGlare",
    Parent = sunParentName,
    Renderable = {
        Type = "RenderablePlane",
        Size = 1.3*10^10.5,
        Origin = "Center",
        Billboard = true,
        Texture = texturesPath .. "/sun-glare.png",
        BlendMode = "Additive"
    }
}

-- Marker for the sun
asset.SunMarker = {
    Name = "SunMarker",
    Parent = asset.Sun.Name,
    Renderable = {
        Type = "RenderablePlane",
        Size = 3.0E11,
        Origin = "Center",
        Billboard = true,
        Texture = texturesPath .. "/marker.png",
        BlendMode = "Additive"
    },
    Transformation = {
        Translation = {
            Type = "StaticTranslation",
            Position = {0, 0, 0, 5}
        }
    }
}

assetHelper.registerSceneGraphNodes(asset, {
    asset.Sun,
    asset.SunGlare,
    asset.SunMarker
})
