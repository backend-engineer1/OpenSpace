asset.require('./base')

local sceneHelper = asset.require('util/scene_helper')

asset.require('scene/solarsystem/planets/earth/earth')
asset.require('scene/solarsystem/planets/earth/satellites/satellites.asset')

-- Set this flag to true if scene is being done in the dome, to lower the speed scale
-- per default 
local domePresentationMode = true
local domeSpeedScale = 0.7

-- Keybindings that are specific for this scene
local Keybindings = {
     {
        Key = "right",
        Name = "Continue camera path",
        Command = "openspace.autonavigation.continuePath()",
        Documentation = "Continue a paused camera path.",
        GuiPath = "/Interaction",
        Local = false
    },
    {
        Key = "Q",
        Name = "Stop camera path",
        Command = "openspace.autonavigation.stopPath()",
        Documentation = "Stop a camera path.",
        GuiPath = "/Interaction",
        Local = false
    }
}

asset.onInitialize(function ()
    sceneHelper.bindKeys(Keybindings)

    local now = openspace.time.currentWallTime()
    -- Jump back one day to be able to show complete weather data on Earth.
    openspace.time.setTime(openspace.time.advancedTime(now, "-1d"))

    openspace.globebrowsing.goToGeo("Earth", 58.5877, 16.1924, 20000000)

    openspace.setPropertyValue("{earth_satellites}.Renderable.Enabled", false)

    if(domePresentationMode) then 
        openspace.setPropertyValueSingle("Modules.AutoNavigation.AutoNavigationHandler.SpeedScale", domeSpeedScale)
    end
end)

asset.onDeinitialize(function ()
    sceneHelper.unbindKeys(Keybindings)
end)
