local timelaps = [[
  -- JWST timelaps timeline
  -- Mission start
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 01 14:06:03",
    "openspace.setPropertyValueSingle('Scene.Earth.Renderable.Layers.NightLayers.Earth_at_Night_2012.Settings.Gamma', 0.7)" ..
    "openspace.setPropertyValueSingle('Scene.EarthAtmosphere.Renderable.Enabled', false)",
    "openspace.setPropertyValueSingle('Scene.Earth.Renderable.Layers.NightLayers.Earth_at_Night_2012.Settings.Gamma', 1.0)" ..
    "openspace.setPropertyValueSingle('Scene.EarthAtmosphere.Renderable.Enabled', true)"
  )
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 01 14:06:04", -- 1 sec delay
    "openspace.time.interpolateDeltaTime(120)"
  )
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 01 14:10:03", -- 4 min pre delay
    "",
    "openspace.time.interpolateDeltaTime(-1)"
  )

  -- array deploy, forwards
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 01 14:35:23", -- 1 min pre delay so time to interpolate
    "openspace.time.interpolateDeltaTime(1)"
  )
  -- array deploy, backwards
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 01 14:36:23",
    "",
    "openspace.time.interpolateDeltaTime(-120)"
  )

  -- array complete, forwards
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 01 14:36:45",
    "openspace.time.interpolateDeltaTime(7200)"
  )
  -- array complete, backwards
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 01 14:37:55", -- 1 min 10 sec pre delay so time to interpolate
    "",
    "openspace.time.interpolateDeltaTime(-1)"
  )
  -- array complete, backwards prepare
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 01 15:46:45", -- 1h 10 min delay for interpolation
    "",
    "openspace.time.interpolateDeltaTime(-120)"
  )

  -- antenna deploy
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 02 08:06:03",
    "openspace.time.interpolateDeltaTime(1800)",
    "openspace.time.interpolateDeltaTime(-7200)"
  )

  -- antenna complete, forwards
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 02 13:45:03",
    "openspace.time.interpolateDeltaTime(18000)"
  )
  -- antenna complete, backwards
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 02 14:45:03", -- 1h pre delay so time to interpolate
    "",
    "openspace.time.interpolateDeltaTime(-1800)"
  )

  -- fw palette deploy, forwards
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 04 06:26:38", -- 2h pre delay so time to interpolate
    "openspace.time.interpolateDeltaTime(3600)"
  )
  -- fw palette deploy, backwards
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 04 08:26:38",
    "",
    "openspace.time.interpolateDeltaTime(-18000)"
  )

  -- fw palette complete
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 04 20:06:03",
    "openspace.time.interpolateDeltaTime(1800)",
    "openspace.time.interpolateDeltaTime(-3600)"
  )

  -- r palette deploy
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 04 22:57:03",
    "openspace.time.interpolateDeltaTime(1800)",
    "openspace.time.interpolateDeltaTime(-1800)"
  )

  -- r palette complete
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 05 02:06:03",
    "openspace.time.interpolateDeltaTime(120)",
    "openspace.time.interpolateDeltaTime(-1800)"
  )

  -- base rise deploy
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 05 02:28:03",
    "openspace.time.interpolateDeltaTime(7200)",
    "openspace.time.interpolateDeltaTime(-120)"
  )

  -- base rise complete
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 06 07:41:03",
    "openspace.time.interpolateDeltaTime(1800)",
    "openspace.time.interpolateDeltaTime(-7200)"
  )

  -- aft flap deploy
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 06 11:06:03",
    "openspace.time.interpolateDeltaTime(600)",
    "openspace.time.interpolateDeltaTime(-1800)"
  )

  -- aft flap complete, forwards
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 06 15:43:03",
    "openspace.time.interpolateDeltaTime(3600)"
  )
  -- aft flap complete, backwards
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 06 16:13:03", -- 30 min pre delay so time to interpolate
    "",
    "openspace.time.interpolateDeltaTime(-600)"
  )

  -- mid booms extend
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 07 01:35:46",
    "openspace.time.interpolateDeltaTime(1800)",
    "openspace.time.interpolateDeltaTime(-3600)"
  )

  -- first boom stop
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 07 02:22:19",
    "openspace.time.interpolateDeltaTime(1800)",
    "openspace.time.interpolateDeltaTime(-1800)"
  )

  -- right boom complete
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 07 07:48:08",
    "openspace.time.interpolateDeltaTime(1800)",
    "openspace.time.interpolateDeltaTime(-1800)"
  )

  -- left booms complete
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 07 12:12:03",
    "openspace.time.interpolateDeltaTime(30)",
    "openspace.time.interpolateDeltaTime(-1800)"
  )

  -- tension sun shield membranes
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 07 12:15:17",
    "openspace.time.interpolateDeltaTime(60)",
    "openspace.time.interpolateDeltaTime(-30)"
  )

  -- membrane tension complete
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 07 12:26:03",
    "openspace.time.interpolateDeltaTime(7200)",
    "openspace.time.interpolateDeltaTime(-60)"
  )

  -- membranes separate
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 08 02:42:52",
    "openspace.time.interpolateDeltaTime(3600)",
    "openspace.time.interpolateDeltaTime(-7200)"
  )

  -- secondary mirror deploy
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 08 14:06:03",
    "openspace.time.interpolateDeltaTime(18000)",
    "openspace.time.interpolateDeltaTime(-3600)"
  )

  -- secondary mirror complete
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 13 00:39:03",
    "openspace.time.interpolateDeltaTime(1200)",
    "openspace.time.interpolateDeltaTime(-18000)"
  )

  -- aft radiator deploy
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 13 02:26:51",
    "openspace.time.interpolateDeltaTime(1800)",
    "openspace.time.interpolateDeltaTime(-1200)"
  )

  -- aft radiator complete, forward
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 13 06:11:03",
    "openspace.time.interpolateDeltaTime(7200)"
  )
  -- aft radiator complete, backward
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 13 07:11:03", -- 1h pre delay so time to interpolate
    "",
    "openspace.time.interpolateDeltaTime(-1800)"
  )

  -- rt cord fold wings deploy
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 13 23:36:03",
    "openspace.time.interpolateDeltaTime(7200)",
    "openspace.time.interpolateDeltaTime(-7200)"
  )

  -- rt cord fold wings complete
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 15 02:46:51",
    "openspace.time.interpolateDeltaTime(7200)",
    "openspace.time.interpolateDeltaTime(-7200)"
  )

  -- lft cord fold wings deploy
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 15 13:06:03",
    "openspace.time.interpolateDeltaTime(7200)",
    "openspace.time.interpolateDeltaTime(-7200)"
  )

  -- lft cord fold wings complete
  openspace.scriptScheduler.loadScheduledScript(
    "2018 OCT 16 09:06:03",
    "openspace.time.interpolateDeltaTime(1)" ..
    "openspace.setPropertyValueSingle('Scene.Earth.Renderable.Layers.NightLayers.Earth_at_Night_2012.Settings.Gamma', 1.0)" ..
    "openspace.setPropertyValueSingle('Scene.EarthAtmosphere.Renderable.Enabled', true)",
    "openspace.time.interpolateDeltaTime(-7200)" ..
    "openspace.setPropertyValueSingle('Scene.Earth.Renderable.Layers.NightLayers.Earth_at_Night_2012.Settings.Gamma', 0.7)" ..
    "openspace.setPropertyValueSingle('Scene.EarthAtmosphere.Renderable.Enabled', false)"
  )
]]

local playForwards = {
  Identifier = "jwst.play.forwards",
  Name = "Play JWST forward",
  Command = [[
    openspace.scriptScheduler.clear();
    openspace.time.setDeltaTime(1);
    openspace.time.setTime('2018 OCT 01 14:06:03');
    ]] .. tostring(timelaps) .. [[
    openspace.scriptScheduler.loadScheduledScript(
      "2018 OCT 16 09:06:04",
      "openspace.scriptScheduler.clear()"
    )
  ]],
  Documentation = "Jump to the JWST launch time and play the timelaps of deployment forward",
  GuiPath = "/JWST",
  IsLocal = false,

  Key = "m"
}

local clearPlay = {
  Identifier = "jwst.play.clear",
  Name = "Clear JWST timelaps",
  Command = [[
    openspace.scriptScheduler.clear();
    local deltaTime = openspace.time.deltaTime();
    if deltaTime > 0 then
      openspace.time.setDeltaTime(1);
    else
      openspace.time.setDeltaTime(-1);
    end
  ]],
  Documentation = "Set delta time back to realtime and clear the JWST deployment timelapse",
  GuiPath = "/JWST",
  IsLocal = false,

  Key = "."
}

asset.onInitialize(function()
  openspace.action.registerAction(playForwards)
  openspace.action.registerAction(clearPlay)
end)

asset.onDeinitialize(function ()
  openspace.scriptScheduler.clear()
end)

asset.meta = {
  Name = "James Webb Space Telescope Timelapse",
  Version = "1.0",
  Description = [[
    Scripts that are scheduled to alter the speed of the simulation time so the deployment
    of the James Webb Space Telescope looks smoother.
  ]],
  Author = "OpenSpace Team",
  URL = "http://openspaceproject.com",
  License = "MIT license"
}
