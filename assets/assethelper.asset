local registerSpiceKernels = function (spiceAsset, kernels)
    spiceAsset.onInitialize(function ()
        for i, kernel in ipairs(kernels) do
            openspace.spice.loadKernel(kernel)
        end
    end)
    spiceAsset.onDeinitialize(function ()
        for i = #kernels, 1, -1 do
            kernel = kernels[i]
            openspace.spice.unloadKernel(kernel) 
        end
    end)
end

local registerSceneGraphNodes = function (sceneAsset, nodes)
    sceneAsset.onInitialize(function ()
        for i, node in ipairs(nodes) do
            openspace.addSceneGraphNode(node)
        end
    end)
    sceneAsset.onDeinitialize(function ()
        for i = #nodes, 1, -1 do
            node = nodes[i]
            openspace.removeSceneGraphNode(node.Name)
        end
    end)
end

asset.export("registerSceneGraphNodes", registerSceneGraphNodes);
asset.export("registerSpiceKernels", registerSpiceKernels);