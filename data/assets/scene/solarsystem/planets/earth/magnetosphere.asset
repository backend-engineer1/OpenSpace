local assetHelper = asset.require('util/asset_helper')
local transforms = asset.require('../../planets/earth/transforms_magnetosphere')

local fieldlinesDirectory = asset.syncedResource({
  Name = "Magnetosphere 2012 event",
  Type = "HttpSynchronization",
  Identifier = "magnetosphere_2012_event",
  Version = 1
})

local earthMagnetosphere = {
  Identifier = "Earths_Magnetosphere",
  Parent = transforms.GSMReferenceFrame.Identifier,
  Renderable = {
    Type = "RenderableFieldlinesSequence",
    SourceFolder = fieldlinesDirectory,
    LineWidth = 1.0,
    AlphaBlendlingEnabled = false,
    InputFileType = "osfls",    -- openspace Field lines Sequence
    MaskingEnabled = true,
    MaskingQuantity = 5,      -- corresponds to "topology"
    --MaskingMinLimit = -0.0, -- this seem to map it to an int =0 which correspond to the topology=closed (fieldlines)
    --MaskingMaxLimit = 0.0,
    MaskingRanges = {{-0, 0}},
    ColorMethod = "By Quantity",
    ColorQuantity = 4,
    ColorTableRanges = {{50, 300}},
    ColorTablePaths = {"C:/OpenSpace/OpenSpace/data/assets/scene/solarsystem/heliosphere/bastille_day/transferfunctions/CMR-illuminance2.txt"},
    LoadAtRuntime = true,
    ScaleToMeters = 1.0,
    SecondsBefore = 24*60*60*365*100,
    SecondsAfter = 24*60*60*365*100,
    Color = {
      Uniform = {1.0, 0.725, 0.75, 1}
    }
  },
  GUI = {
    Path = "/Solar System/Planets/Earth",
    Name = "Magnetosphere"
  },
}

assetHelper.registerSceneGraphNodesAndExport(asset, { earthMagnetosphere })

asset.meta = {
  Name = "Static generic magnetosphere of fieldlines",
  Version = "1.0",
  Description = "Magnetic fieldlines for the bastille day CME event",
  Author = "CCMC",
  URL = "",
  License = ""
}
