local registerSpiceKernels = function (spiceAsset, kernels)
    local oldInit = spiceAsset.onInitialize;
    spiceAsset.onInitialize(function ()
        print "loading spice kernels...."
        for i, kernel in ipairs(kernels) do
            openspace.spice.loadKernel(kernel)
        end
    end)

    local oldDeinit = spiceAsset.onDeinitialize;
    spiceAsset.onDeinitialize(function ()
        for i = #kernels, 1, -1 do
            kernel = kernels[i]
            openspace.spice.unloadKernel(kernel) 
        end
    end)
end

asset.export("registerSceneGraphNodes", registerSceneGraphNodes);
asset.export("registerSpiceKernels", registerSpiceKernels);
asset.export("registerSynchronizations", registerSynchronizations);