local assetHelper = asset.import('assethelper')
local transforms = asset.import('./transforms')

local sunParentName = transforms.SunIau.Name;

asset.data = {
    FileRequest = {
        {
            Destination = asset.syncedResource("textures"),
            Identifier = "sun_textures",
            Version = 1
        }
    }
}

-- Simple sphere to represent the Sun
asset.Sun = {
    Name = "Sun",
    Renderable = {
        Parent = sunParentName,
        Type = "RenderablePlanet",
        Frame = "IAU_SUN",
        Body = "SUN", 
        Geometry = {
            Type = "SimpleSphere",
            Radius = 6.957E8,
            Segments = 100
        },
        Textures = {
            Type = "simple",
            Color = asset.syncedResource("textures/sun.jpg"),
        },
        PerformShading = false,
    }
}

-- Billboard to represent the sun
asset.SunGlare = {
    Name = "SunGlare",
    Parent = sunParentName,
    Renderable = {
        Type = "RenderablePlane",
        Size = 1.3*10^10.5,
        Origin = "Center",
        Billboard = true,
        Texture = asset.syncedResource("textures/sun-glare.png"),
        BlendMode = "Additive"
    }
}

-- Marker for the sun
asset.SunMarker = {
    Name = "SunMarker",
    Parent = asset.Sun.Name,
    Renderable = {
        Type = "RenderablePlane",
        Size = 3.0E11,
        Origin = "Center",
        Billboard = true,
        Texture = asset.syncedResource("textures/marker.png"),
        BlendMode = "Additive"
    },
    Transformation = {
        Translation = {
            Type = "StaticTranslation",
            Position = {0, 0, 0, 5}
        }
    }
}

assetHelper.registerSceneGraphNodes(asset, {
    asset.Sun,
    asset.SunGlare,
    asset.SunMarker
})
