--local Base = asset.import('base')
local SpiceBase = asset.import('spice/base')
local AssetHelper = asset.import('assethelper')

asset.SolarSystem = {
    Name = "SolarSystem"
}

asset.SolarSystemBarycenter = {
    Name = "SolarSystemBarycenter",
    Parent = asset.SolarSystem.Name
}

asset.Sun = {
    Name = "Sun",
    Parent = asset.SolarSystemBarycenter.Name,
    Renderable = {
        Type = "RenderablePlanet",
        Frame = "IAU_SUN",
        Body = "SUN", 
        Geometry = {
            Type = "SimpleSphere",
            --Radius = 2.783200E9,
            Radius = 6.957E8,
            Segments = 100
        },
        Textures = {
            Type = "simple",
            Color = asset.syncedResource("textures/sun.jpg"),
        },
        PerformShading = false,
    },
    Transform = {
        Translation = {
            Type = "SpiceTranslation",
            Body = "SUN",
            Observer = "SSB",
            --Kernels = BaseSpiceKernels.syncedResource("de430_1850-2150.bsp")
        },
        Rotation = {
            Type = "SpiceRotation",
            SourceFrame = "IAU_SUN",
            DestinationFrame = "GALACTIC"
        }
    }
}

asset.SunGlare = {
    Name = "SunGlare",
    Parent = asset.SolarSystemBarycenter.Name,
    Renderable = {
        Type = "RenderablePlane",
        Size = 1.3*10^10.5,
        Origin = "Center",
        Billboard = true,
        Texture = asset.syncedResource("textures/sun-glare.png"),
        BlendMode = "Additive"
    },
    Transform = {
        Translation = {
            Type = "SpiceTranslation",
            Body = "SUN",
            Observer = "SSB",
            Kernels = "${OPENSPACE_DATA}/spice/de430_1850-2150.bsp"
        }
    }
}

asset.SunMarker = {
    Name = "SunMarker",
    Parent = asset.Sun.Name,
    Renderable = {
        Type = "RenderablePlane",
        Size = 3.0E11,
        Origin = "Center",
        Billboard = true,
        Texture = asset.syncedResource("textures/marker.png"),
        BlendMode = "Additive"
    },
    Transformation = {
        Translation = {
            Type = "StaticTranslation",
            Position = {0, 0, 0, 5}
        }
    }
}

AssetHelper.registerSceneGraphNodes(asset, {
    asset.SolarSystem,
    asset.SolarSystemBarycenter,
    asset.Sun,
    asset.SunGlare,
    asset.SunMarker
})